{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/emploi.service\";\nimport * as i3 from \"../../services/personne.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction EmploiFormComponent_h2_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"Ajouter un emploi pour \", ctx_r0.personne.prenom, \" \", ctx_r0.personne.nom, \"\");\n  }\n}\nfunction EmploiFormComponent_h2_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\");\n    i0.ɵɵtext(1, \"Ajouter un emploi\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmploiFormComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.messageErreur);\n  }\n}\nfunction EmploiFormComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.messageSucces);\n  }\n}\nfunction EmploiFormComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" Le nom de l'entreprise est obligatoire \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmploiFormComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" Le titre du poste est obligatoire \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmploiFormComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" La date de d\\u00E9but est obligatoire \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmploiFormComponent_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 27);\n  }\n}\nexport class EmploiFormComponent {\n  constructor(formBuilder, emploiService, personneService, route, router) {\n    this.formBuilder = formBuilder;\n    this.emploiService = emploiService;\n    this.personneService = personneService;\n    this.route = route;\n    this.router = router;\n    this.personneId = 0;\n    this.personne = null;\n    this.messageErreur = '';\n    this.messageSucces = '';\n    this.soumissionEnCours = false;\n    this.dateAujourdhui = new Date().toISOString().split('T')[0];\n    this.emploiForm = this.formBuilder.group({\n      nomEntreprise: ['', [Validators.required]],\n      titrePoste: ['', [Validators.required]],\n      dateDebut: ['', [Validators.required]],\n      dateFin: ['']\n    });\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      this.personneId = +params['personneId'];\n      if (this.personneId) {\n        this.chargerPersonne();\n      }\n    });\n  }\n  chargerPersonne() {\n    this.personneService.obtenirPersonneParId(this.personneId).subscribe({\n      next: data => {\n        this.personne = data;\n        console.log('Personne chargée:', this.personne);\n        console.log('Emplois actuels:', this.personne.emploisActuels?.length || 0);\n      },\n      error: () => {\n        this.messageErreur = \"Personne introuvable\";\n      }\n    });\n  }\n  onSubmit() {\n    if (this.emploiForm.invalid) {\n      return;\n    }\n    this.soumissionEnCours = true;\n    this.messageErreur = '';\n    this.messageSucces = '';\n    const emploi = this.emploiForm.value;\n    // Vérifier si la date de fin est vide (emploi actuel)\n    if (emploi.dateFin === '') {\n      emploi.dateFin = null;\n      console.log('Emploi actuel: date de fin est null');\n    }\n    console.log('Envoi de l\\'emploi au serveur:', emploi);\n    this.emploiService.ajouterEmploi(emploi, this.personneId).subscribe({\n      next: resultat => {\n        console.log('Emploi ajouté avec succès:', resultat);\n        this.soumissionEnCours = false;\n        this.messageSucces = 'Emploi ajouté avec succès!';\n        // Recharger les données de la personne pour mettre à jour les emplois actuels\n        this.personneService.obtenirPersonneParId(this.personneId).subscribe(personneActualisee => {\n          console.log('Personne actualisée après ajout d\\'emploi:', personneActualisee);\n          console.log('Emplois actuels après ajout:', personneActualisee.emploisActuels?.length || 0);\n        });\n        setTimeout(() => {\n          this.router.navigate(['/personnes']);\n        }, 1500);\n      },\n      error: erreur => {\n        this.soumissionEnCours = false;\n        console.error('Erreur reçue:', erreur);\n        // Traiter le message d'erreur correctement\n        if (typeof erreur.error === 'string') {\n          this.messageErreur = erreur.error;\n        } else if (erreur.error && erreur.error.message) {\n          this.messageErreur = erreur.error.message;\n        } else if (erreur.message) {\n          this.messageErreur = erreur.message;\n        } else {\n          this.messageErreur = \"Une erreur s'est produite lors de l'ajout de l'emploi\";\n        }\n      }\n    });\n  }\n  static {\n    this.ɵfac = function EmploiFormComponent_Factory(t) {\n      return new (t || EmploiFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.EmploiService), i0.ɵɵdirectiveInject(i3.PersonneService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EmploiFormComponent,\n      selectors: [[\"app-emploi-form\"]],\n      decls: 38,\n      vars: 13,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"card\"], [1, \"card-header\"], [4, \"ngIf\"], [1, \"card-body\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"mb-3\"], [\"for\", \"nomEntreprise\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"nomEntreprise\", \"formControlName\", \"nomEntreprise\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"titrePoste\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"titrePoste\", \"formControlName\", \"titrePoste\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"dateDebut\", 1, \"form-label\"], [\"type\", \"date\", \"id\", \"dateDebut\", \"formControlName\", \"dateDebut\", \"required\", \"\", 1, \"form-control\", 3, \"max\"], [\"for\", \"dateFin\", 1, \"form-label\"], [1, \"text-muted\"], [\"type\", \"date\", \"id\", \"dateFin\", \"formControlName\", \"dateFin\", 1, \"form-control\", 3, \"min\", \"max\"], [1, \"form-text\", \"text-muted\"], [1, \"d-flex\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-1\", \"role\", \"status\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"type\", \"button\", \"routerLink\", \"/personnes\", 1, \"btn\", \"btn-secondary\", \"ms-2\"], [1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-success\"], [1, \"text-danger\"], [\"role\", \"status\", \"aria-hidden\", \"true\", 1, \"spinner-border\", \"spinner-border-sm\", \"me-1\"]],\n      template: function EmploiFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n          i0.ɵɵtemplate(3, EmploiFormComponent_h2_3_Template, 2, 2, \"h2\", 3)(4, EmploiFormComponent_h2_4_Template, 2, 0, \"h2\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 4);\n          i0.ɵɵtemplate(6, EmploiFormComponent_div_6_Template, 2, 1, \"div\", 5)(7, EmploiFormComponent_div_7_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementStart(8, \"form\", 7);\n          i0.ɵɵlistener(\"ngSubmit\", function EmploiFormComponent_Template_form_ngSubmit_8_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(9, \"div\", 8)(10, \"label\", 9);\n          i0.ɵɵtext(11, \"Nom de l'entreprise\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(12, \"input\", 10);\n          i0.ɵɵtemplate(13, EmploiFormComponent_div_13_Template, 2, 0, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 8)(15, \"label\", 12);\n          i0.ɵɵtext(16, \"Titre du poste\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(17, \"input\", 13);\n          i0.ɵɵtemplate(18, EmploiFormComponent_div_18_Template, 2, 0, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"div\", 8)(20, \"label\", 14);\n          i0.ɵɵtext(21, \"Date de d\\u00E9but\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(22, \"input\", 15);\n          i0.ɵɵtemplate(23, EmploiFormComponent_div_23_Template, 2, 0, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"div\", 8)(25, \"label\", 16);\n          i0.ɵɵtext(26, \"Date de fin \");\n          i0.ɵɵelementStart(27, \"small\", 17);\n          i0.ɵɵtext(28, \"(Laisser vide pour un emploi actuel)\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(29, \"input\", 18);\n          i0.ɵɵelementStart(30, \"small\", 19);\n          i0.ɵɵtext(31, \"Si c'est l'emploi actuel, ne pas renseigner la date de fin\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(32, \"div\", 20)(33, \"button\", 21);\n          i0.ɵɵtemplate(34, EmploiFormComponent_span_34_Template, 1, 0, \"span\", 22);\n          i0.ɵɵtext(35, \" Enregistrer \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"button\", 23);\n          i0.ɵɵtext(37, \"Annuler\");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          let tmp_5_0;\n          let tmp_6_0;\n          let tmp_8_0;\n          let tmp_9_0;\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.personne);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.personne);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.messageErreur);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.messageSucces);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.emploiForm);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.emploiForm.get(\"nomEntreprise\")) == null ? null : tmp_5_0.invalid) && (((tmp_5_0 = ctx.emploiForm.get(\"nomEntreprise\")) == null ? null : tmp_5_0.dirty) || ((tmp_5_0 = ctx.emploiForm.get(\"nomEntreprise\")) == null ? null : tmp_5_0.touched)));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx.emploiForm.get(\"titrePoste\")) == null ? null : tmp_6_0.invalid) && (((tmp_6_0 = ctx.emploiForm.get(\"titrePoste\")) == null ? null : tmp_6_0.dirty) || ((tmp_6_0 = ctx.emploiForm.get(\"titrePoste\")) == null ? null : tmp_6_0.touched)));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"max\", ctx.dateAujourdhui);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ((tmp_8_0 = ctx.emploiForm.get(\"dateDebut\")) == null ? null : tmp_8_0.invalid) && (((tmp_8_0 = ctx.emploiForm.get(\"dateDebut\")) == null ? null : tmp_8_0.dirty) || ((tmp_8_0 = ctx.emploiForm.get(\"dateDebut\")) == null ? null : tmp_8_0.touched)));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"min\", (tmp_9_0 = ctx.emploiForm.get(\"dateDebut\")) == null ? null : tmp_9_0.value)(\"max\", ctx.dateAujourdhui);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", ctx.emploiForm.invalid || ctx.soumissionEnCours);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.soumissionEnCours);\n        }\n      },\n      dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i4.RouterLink],\n      styles: [\".card[_ngcontent-%COMP%] {\\n  max-width: 600px;\\n  margin: 0 auto;\\n}\\n\\n.form-label[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n}\\n\\n.text-muted[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n} \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9lbXBsb2ktZm9ybS9lbXBsb2ktZm9ybS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FyZCB7XHJcbiAgbWF4LXdpZHRoOiA2MDBweDtcclxuICBtYXJnaW46IDAgYXV0bztcclxufVxyXG5cclxuLmZvcm0tbGFiZWwge1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbn1cclxuXHJcbi50ZXh0LW11dGVkIHtcclxuICBmb250LXNpemU6IDAuOXJlbTtcclxufSAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate2","ctx_r0","personne","prenom","nom","ɵɵtextInterpolate","messageErreur","messageSucces","ɵɵelement","EmploiFormComponent","constructor","formBuilder","emploiService","personneService","route","router","personneId","soumissionEnCours","dateAujourdhui","Date","toISOString","split","emploiForm","group","nomEntreprise","required","titrePoste","dateDebut","dateFin","ngOnInit","params","subscribe","chargerPersonne","obtenirPersonneParId","next","data","console","log","emploisActuels","length","error","onSubmit","invalid","emploi","value","ajouterEmploi","resultat","personneActualisee","setTimeout","navigate","erreur","message","ɵɵdirectiveInject","i1","FormBuilder","i2","EmploiService","i3","PersonneService","i4","ActivatedRoute","Router","selectors","decls","vars","consts","template","EmploiFormComponent_Template","rf","ctx","ɵɵtemplate","EmploiFormComponent_h2_3_Template","EmploiFormComponent_h2_4_Template","EmploiFormComponent_div_6_Template","EmploiFormComponent_div_7_Template","ɵɵlistener","EmploiFormComponent_Template_form_ngSubmit_8_listener","EmploiFormComponent_div_13_Template","EmploiFormComponent_div_18_Template","EmploiFormComponent_div_23_Template","EmploiFormComponent_span_34_Template","ɵɵproperty","tmp_5_0","get","dirty","touched","tmp_6_0","tmp_8_0","tmp_9_0"],"sources":["C:\\Users\\samyl\\Desktop\\Web-Atrio-Test\\demo.webatrio-frontend\\src\\app\\components\\emploi-form\\emploi-form.component.ts","C:\\Users\\samyl\\Desktop\\Web-Atrio-Test\\demo.webatrio-frontend\\src\\app\\components\\emploi-form\\emploi-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { EmploiService } from '../../services/emploi.service';\r\nimport { PersonneService } from '../../services/personne.service';\r\nimport { Personne } from '../../models/personne.model';\r\n\r\n@Component({\r\n  selector: 'app-emploi-form',\r\n  templateUrl: './emploi-form.component.html',\r\n  styleUrls: ['./emploi-form.component.css']\r\n})\r\nexport class EmploiFormComponent implements OnInit {\r\n  emploiForm: FormGroup;\r\n  personneId: number = 0;\r\n  personne: Personne | null = null;\r\n  messageErreur: string = '';\r\n  messageSucces: string = '';\r\n  soumissionEnCours: boolean = false;\r\n  dateAujourdhui: string = new Date().toISOString().split('T')[0];\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private emploiService: EmploiService,\r\n    private personneService: PersonneService,\r\n    private route: ActivatedRoute,\r\n    private router: Router\r\n  ) {\r\n    this.emploiForm = this.formBuilder.group({\r\n      nomEntreprise: ['', [Validators.required]],\r\n      titrePoste: ['', [Validators.required]],\r\n      dateDebut: ['', [Validators.required]],\r\n      dateFin: ['']\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.params.subscribe(params => {\r\n      this.personneId = +params['personneId'];\r\n      if (this.personneId) {\r\n        this.chargerPersonne();\r\n      }\r\n    });\r\n  }\r\n\r\n  chargerPersonne(): void {\r\n    this.personneService.obtenirPersonneParId(this.personneId).subscribe({\r\n      next: (data) => {\r\n        this.personne = data;\r\n        console.log('Personne chargée:', this.personne);\r\n        console.log('Emplois actuels:', this.personne.emploisActuels?.length || 0);\r\n      },\r\n      error: () => {\r\n        this.messageErreur = \"Personne introuvable\";\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.emploiForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.soumissionEnCours = true;\r\n    this.messageErreur = '';\r\n    this.messageSucces = '';\r\n\r\n    const emploi = this.emploiForm.value;\r\n    \r\n    // Vérifier si la date de fin est vide (emploi actuel)\r\n    if (emploi.dateFin === '') {\r\n      emploi.dateFin = null;\r\n      console.log('Emploi actuel: date de fin est null');\r\n    }\r\n    \r\n    console.log('Envoi de l\\'emploi au serveur:', emploi);\r\n    \r\n    this.emploiService.ajouterEmploi(emploi, this.personneId).subscribe({\r\n      next: (resultat) => {\r\n        console.log('Emploi ajouté avec succès:', resultat);\r\n        this.soumissionEnCours = false;\r\n        this.messageSucces = 'Emploi ajouté avec succès!';\r\n        \r\n        // Recharger les données de la personne pour mettre à jour les emplois actuels\r\n        this.personneService.obtenirPersonneParId(this.personneId).subscribe(personneActualisee => {\r\n          console.log('Personne actualisée après ajout d\\'emploi:', personneActualisee);\r\n          console.log('Emplois actuels après ajout:', personneActualisee.emploisActuels?.length || 0);\r\n        });\r\n        \r\n        setTimeout(() => {\r\n          this.router.navigate(['/personnes']);\r\n        }, 1500);\r\n      },\r\n      error: (erreur) => {\r\n        this.soumissionEnCours = false;\r\n        console.error('Erreur reçue:', erreur);\r\n        \r\n        // Traiter le message d'erreur correctement\r\n        if (typeof erreur.error === 'string') {\r\n          this.messageErreur = erreur.error;\r\n        } else if (erreur.error && erreur.error.message) {\r\n          this.messageErreur = erreur.error.message;\r\n        } else if (erreur.message) {\r\n          this.messageErreur = erreur.message;\r\n        } else {\r\n          this.messageErreur = \"Une erreur s'est produite lors de l'ajout de l'emploi\";\r\n        }\r\n      }\r\n    });\r\n  }\r\n} ","<div class=\"container mt-4\">\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      <h2 *ngIf=\"personne\">Ajouter un emploi pour {{ personne.prenom }} {{ personne.nom }}</h2>\r\n      <h2 *ngIf=\"!personne\">Ajouter un emploi</h2>\r\n    </div>\r\n    <div class=\"card-body\">\r\n      <div *ngIf=\"messageErreur\" class=\"alert alert-danger\">{{ messageErreur }}</div>\r\n      <div *ngIf=\"messageSucces\" class=\"alert alert-success\">{{ messageSucces }}</div>\r\n\r\n      <form [formGroup]=\"emploiForm\" (ngSubmit)=\"onSubmit()\">\r\n        <div class=\"mb-3\">\r\n          <label for=\"nomEntreprise\" class=\"form-label\">Nom de l'entreprise</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"nomEntreprise\" formControlName=\"nomEntreprise\" required>\r\n          <div class=\"text-danger\" *ngIf=\"emploiForm.get('nomEntreprise')?.invalid && (emploiForm.get('nomEntreprise')?.dirty || emploiForm.get('nomEntreprise')?.touched)\">\r\n            Le nom de l'entreprise est obligatoire\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"titrePoste\" class=\"form-label\">Titre du poste</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"titrePoste\" formControlName=\"titrePoste\" required>\r\n          <div class=\"text-danger\" *ngIf=\"emploiForm.get('titrePoste')?.invalid && (emploiForm.get('titrePoste')?.dirty || emploiForm.get('titrePoste')?.touched)\">\r\n            Le titre du poste est obligatoire\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"dateDebut\" class=\"form-label\">Date de début</label>\r\n          <input type=\"date\" class=\"form-control\" id=\"dateDebut\" formControlName=\"dateDebut\" required [max]=\"dateAujourdhui\">\r\n          <div class=\"text-danger\" *ngIf=\"emploiForm.get('dateDebut')?.invalid && (emploiForm.get('dateDebut')?.dirty || emploiForm.get('dateDebut')?.touched)\">\r\n            La date de début est obligatoire\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"dateFin\" class=\"form-label\">Date de fin <small class=\"text-muted\">(Laisser vide pour un emploi actuel)</small></label>\r\n          <input type=\"date\" class=\"form-control\" id=\"dateFin\" formControlName=\"dateFin\" [min]=\"emploiForm.get('dateDebut')?.value\" [max]=\"dateAujourdhui\">\r\n          <small class=\"form-text text-muted\">Si c'est l'emploi actuel, ne pas renseigner la date de fin</small>\r\n        </div>\r\n\r\n        <div class=\"d-flex\">\r\n          <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"emploiForm.invalid || soumissionEnCours\">\r\n            <span *ngIf=\"soumissionEnCours\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n            Enregistrer\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-secondary ms-2\" routerLink=\"/personnes\">Annuler</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}